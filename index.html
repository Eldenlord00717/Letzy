<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <title>SayYes</title>
    </head>
    <body>
        <div class="container">
            <div>
                <h1 class="header_text">Мы идем в кино?</h1>
            </div>
            <div class="gif_container">
                <img src="https://i.postimg.cc/CKfWDG6j/first.gif">
            </div>
            <canvas id="matrixCanvas" class="matrix-rain" style="display:none;"></canvas>
            <div class="buttons">
                <button class="btn" id="yesButton" onclick="yes()">Да</button>
                <button class="btn" id="noButton" onmouseover="moveButton()" onclick="handleNoButton()">Нет</button>
                <script>
                let noPressCount = 0;
                function yes() {
                    window.location.href = "yes.html";
                }

                function moveButton() {
                    var noButton = document.getElementById("noButton");
                    if (window.innerWidth > 768) { // Проверка на веб-версию
                        var x = Math.random() * (window.innerWidth - noButton.offsetWidth);
                        var y = Math.random() * (window.innerHeight - noButton.offsetHeight);
                        noButton.style.position = 'absolute';
                        noButton.style.left = x + 'px';
                        noButton.style.top = y + 'px';
                        // Добавляем тряску
                        noButton.classList.add('shake');
                        setTimeout(() => noButton.classList.remove('shake'), 400);
                        // Случайный цвет
                        noButton.style.background = `hsl(${Math.floor(Math.random()*360)}, 80%, 80%)`;
                        // Случайный угол
                        noButton.style.transform = `rotate(${Math.floor(Math.random()*40-20)}deg)`;
                    }
                }

                function handleNoButton() {
                    var noButton = document.getElementById("noButton");
                    noPressCount++;
                    if (noPressCount >= 7) {
                        showMatrixAndReload();
                        return;
                    }
                    if (window.innerWidth > 768) { // Веб-версия
                        var currentSize = parseFloat(window.getComputedStyle(noButton, null).getPropertyValue('font-size'));
                        noButton.style.fontSize = (currentSize + 5) + 'px'; // Увеличение размера шрифта
                        // Тряска и смена цвета
                        noButton.classList.add('shake');
                        setTimeout(() => noButton.classList.remove('shake'), 400);
                        noButton.style.background = `hsl(${Math.floor(Math.random()*360)}, 80%, 80%)`;
                        noButton.style.transform = `rotate(${Math.floor(Math.random()*40-20)}deg)`;
                    } else { // Мобильная версия
                        var currentSize = parseFloat(window.getComputedStyle(noButton, null).getPropertyValue('font-size'));
                        noButton.style.fontSize = (currentSize + 5) + 'px'; // Увеличение размера шрифта
                        // Вибрация
                        if (navigator.vibrate) navigator.vibrate(200);
                        // Список фраз для замены текста
                        var phrases = [
                            'Не-а',
                            'Неверно',
                            'Жми Дааааа!',
                            'Подумай ещё',
                            'Может Да?)'
                        ];
                        // Случайный выбор фразы
                        var randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
                        noButton.textContent = randomPhrase; // Изменение текста кнопки
                        // Случайный цвет
                        noButton.style.background = `hsl(${Math.floor(Math.random()*360)}, 80%, 80%)`;
                        // Случайный угол
                        noButton.style.transform = `rotate(${Math.floor(Math.random()*40-20)}deg)`;
                    }
                }

                // Matrix rain эффект и перезагрузка
                function showMatrixAndReload() {
                    const canvas = document.getElementById('matrixCanvas');
                    canvas.style.display = 'block';
                    const ctx = canvas.getContext('2d');
                    let width = window.innerWidth;
                    let height = window.innerHeight;
                    canvas.width = width;
                    canvas.height = height;
                    // Слова и символы для эффекта
                    const matrixWords = ['Vasya', '❤', '♥'];
                    // Используем слова и сердечки
                    const fontSize = 28;
                    const columns = Math.floor(width / fontSize);
                    const drops = Array(columns).fill(1);
                    ctx.font = fontSize + 'px monospace';
                    let animationFrame;
                    function drawMatrix() {
                        ctx.fillStyle = 'rgba(0,0,0,0.15)';
                        ctx.fillRect(0, 0, width, height);
                        for (let i = 0; i < drops.length; i++) {
                            // Выбираем случайное слово или сердечко
                            const text = matrixWords[Math.floor(Math.random() * matrixWords.length)];
                            // Цвет: зелёный для слов, розовый для сердечек
                            if (text === '❤' || text === '♥') {
                                ctx.fillStyle = '#ff1744'; // ярко-красный для контраста
                            } else {
                                ctx.fillStyle = '#0F0';
                            }
                            ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                            if (drops[i] * fontSize > height && Math.random() > 0.975) {
                                drops[i] = 0;
                            }
                            drops[i]++;
                        }
                        animationFrame = requestAnimationFrame(drawMatrix);
                    }
                    drawMatrix();
                    setTimeout(() => {
                        cancelAnimationFrame(animationFrame);
                        location.reload();
                    }, 1800);
                }
                </script>
            </div>
        </div>
    </body>
</html>

